<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Compare.html</title>
	<link rel="stylesheet" href="modules/compare.css">
	<script src="modules/jquery-3.1.1.min.js"></script>
	<script src="modules/compare-util.js" defer></script>
	<script src="compare.js" defer></script>
</head>
<body class="en">
	<script>
		function changeLang(lang) {
			if (lang != "") {
				var newURL = location.href.replace(/\?.*/, '') + '?lang=' + lang;
				window.history.replaceState('','', newURL);
				document.body.setAttribute('class', lang);
			}
		}
		(function() {
			var m = location.search.match(/(?:\?|\&)lang\=([^&]+)/);
			var lang = m ? m[1] : (
				(window.navigator.languages && window.navigator.languages[0]) ||
				window.navigator.language ||
				window.navigator.userLanguage ||
				window.navigator.browserLanguage);
			if (lang && lang.match(/^ja/)) {
				document.body.setAttribute('class', 'ja');
			}
		})();
	</script>

<input type="file" id="file" style="display:none;" accept="image/*" multiple />
<div id="viewroot">
	<div id="sidebar">
		<button id="add" onclick="$('#file').click()">
			<img src="res/add.svg" width="100%">
			<span class="tooltip en">Add new picture</span>
			<span class="tooltip ja">画像を追加</span>
		</button>
		<div class="space"></div>
		<button id="infobtn" onclick="toggleInfo()">
			<img src="res/info.svg" width="100%">
			<span class="tooltip keys en">Show image information <span>i</span></span>
			<span class="tooltip keys ja">画像情報を表示 <span>i</span></span>
		</button>
		<button onclick="zoomIn()">
			<img src="res/zoomin.svg" width="100%">
			<span class="tooltip keys en">Zoom in <span>+</span></span>
			<span class="tooltip keys ja">拡大 <span>+</span></span>
		</button>
		<button onclick="zoomOut()">
			<img src="res/zoomout.svg" width="100%">
			<span class="tooltip keys en">Zoom out <span>-</span></span>
			<span class="tooltip keys ja">縮小 <span>-</span></span>
		</button>
		<button id="arrange" onclick="arrangeLayout()">
			<img src="res/layout_x.svg" width="100%">
			<span class="tooltip keys en">Arrange layout <span>a</span></span>
			<span class="tooltip keys ja">レイアウト変更 <span>a</span></span>
		</button>
		<button id="overlay" onclick="toggleOverlay()" style="display:none">
			<img src="res/overlay.svg" width="100%">
			<span class="tooltip keys en">Overlay mode <span>o</span></span>
			<span class="tooltip keys ja">オーバーレイモード <span>o</span></span>
		</button>
		<div class="bottom">
			<button onclick="toggleAnalysis()">
				<img src="res/histogram.svg" width="100%">
				<span class="tooltip keys en">Show analysis tools <span>c</span></span>
				<span class="tooltip keys ja">分析ツールを表示 <span>c</span></span>
			</button>
			<button onclick="toggleFullscreen()">
				<img src="res/full.svg" width="100%">
				<span class="tooltip keys en">Fullscreen <span>f</span></span>
				<span class="tooltip keys ja">フルスクリーン表示 <span>f</span></span>
			</button>
			<div class="space"></div>
			<button id="help" onclick="toggleHelp()">
				<img src="res/help.svg" width="100%">
				<span class="tooltip keys en">Show help <span>?</span></span>
				<span class="tooltip keys ja">ヘルプを表示 <span>?</span></span>
			</button>
		</div>
	</div>
	<div id="view">
		<div class="hudContainer">
			<div id="mode" class="light hud">
				<span class="en"></span>
				<span class="ja"></span>
			</div>
			<div id="map" class="dark hud">
				<svg>
					<clipPath id="mapClip">
						<rect x="0" y="0" width="100%" height="100%"/>
					</clipPath>
					<g stroke="none" fill="none" stroke-width="0.5" opacity="0.4">
						<rect id="mapROI" fill="gray" clip-path="url(#mapClip)"/>
						<rect id="mapFrame" stroke="white" x="0" y="0" width="100%" height="100%"/>
					</g>
				</svg>
			</div>
		</div>
		<div class="emptyBox" id="drop">
			<div class="dropHere">
				<span class="en">Drop image files here</span>
				<span class="ja">ここに画像ファイルをドラッグ＆ドロップ</span>
			</div>
		</div>
		<div class="emptyBox">
			<div class="dropHere">
				<span class="en">Drop image files here</span>
				<span class="ja">ここに画像ファイルをドラッグ＆ドロップ</span>
			</div>
		</div>
	</div>
	<div id="shortcuts" class="dialog">
		<div>
			<div class="header">
				<div>
					<h3>
						<span class="en">Compare.html -image comparison tool-</span>
						<span class="ja">Compare.html -画像比較ツール-</span>
					</h3>
					<p><a href="https://github.com/tshino/compare" target="_blank">https://github.com/tshino/compare</a></p>
				</div>
				<div>
					<select id="selectLang" onchange="changeLang(this.options[this.selectedIndex].value)">
						<option value="">(Select language)</option>
						<option value="ja">日本語</option>
						<option value="en">English</option>
					</select>
				</div>
			</div>
			<table>
				<tr>
					<th>
						<span class="en">Keyboard shortcuts</span>
						<span class="ja">キーボードショートカット</span>
					<th>
				</tr>
				<tr>
					<td class="keys"><span>+</span> / <span>-</span> / <span>PgUp</span> / <span>PgDn</span></td>
					<td><span class="en">zoom in/out</span><span class="ja">拡大/縮小</span></td>
				</tr>
				<tr>
					<td class="keys"><span>←</span> / <span>→</span> / <span>↑</span> / <span>↓</span></td>
					<td><span class="en">scroll</span><span class="ja">スクロール</span></td>
				</tr>
				<tr>
					<td class="keys"><span>1</span> / <span>2</span> / ... </td>
					<td><span class="en">switch to single picture view</span><span class="ja">1枚画像表示に切り替え</span></td>
				</tr>
				<tr>
					<td class="keys"><span>0</span></td>
					<td><span class="en">show all pictures</span><span class="ja">すべての画像を表示</span></td>
				</tr>
				<tr>
					<td class="keys"><span>a</span></td>
					<td><span class="en">arrange layout</span><span class="ja">レイアウト変更</span></td>
				</tr>
				<tr>
					<td class="keys"><span>o</span></td>
					<td><span class="en">overlay mode</span><span class="ja">オーバーレイモード</span></td>
				</tr>
				<tr>
					<td class="keys"><span>Esc</span></td>
					<td><span class="en">reset zoom</span><span class="ja">拡大状態をリセット</span></td>
				</tr>
				<tr>
					<td class="keys"><span>i</span></td>
					<td><span class="en">image information</span><span class="ja">画像情報</span></td>
				</tr>
				<tr>
					<td class="keys"><span>c</span></td>
					<td><span class="en">analysis tools</span><span class="ja">分析ツール</span></td>
				</tr>
				<tr>
					<td class="keys"><span>h</span></td>
					<td><span class="en">histogram</span><span class="ja">ヒストグラム</span></td>
				</tr>
				<tr>
					<td class="keys"><span>w</span></td>
					<td><span class="en">waveform</span><span class="ja">波形</span></td>
				</tr>
				<tr>
					<td class="keys"><span>m</span></td>
					<td><span class="en">Image quality metrics</span><span class="ja">画質メトリクス</span></td>
				</tr>
				<tr>
					<td class="keys"><span>f</span></td>
					<td><span class="en">full screen</span><span class="ja">フルスクリーン表示</span></td>
				</tr>
				<tr>
					<td class="keys"><span>?</span></td>
					<td><span class="en">show help</span><span class="ja">ヘルプ</span></td>
				</tr>
			</table>
		</div>
	</div>
	<div id="info" class="dialog">
		<div>
			<div class="header">
				<h3>
					<img src="res/info.svg" width="20">
					<span class="en">Image information</span>
					<span class="ja">画像情報</span>
				</h3>
			</div>
			<div>
				<table id="infoTable">
					<tr id="infoName">
						<td class="prop">
							<span class="en">name</span>
							<span class="ja">名前</span>
						</td>
					</tr>
					<tr id="infoFormat">
						<td class="prop">
							<span class="en">format (*)</span>
							<span class="ja">ファイル形式 (※)</span>
						</td>
					</tr>
					<tr id="infoWidth" class="num">
						<td class="prop">
							<span class="en">width [px]</span>
							<span class="ja">幅 [px]</span>
						</td>
					</tr>
					<tr id="infoHeight" class="num">
						<td class="prop">
							<span class="en">height [px]</span>
							<span class="ja">高さ [px]</span>
						</td>
					</tr>
					<tr id="infoAspect" class="num">
						<td class="prop">
							<span class="en">aspect ratio</span>
							<span class="ja">アスペクト比</span>
						</td>
					</tr>
					<tr id="infoOrientation" class="enum">
						<td class="prop">
							<span class="en">orientation (Exif)</span>
							<span class="ja">回転方向 (Exif)</span>
						</td>
					</tr>
					<tr id="infoFileSize" class="num">
						<td class="prop">
							<span class="en">file size [bytes]</span>
							<span class="ja">ファイルサイズ [バイト]</span>
						</td>
					</tr>
					<tr id="infoLastModified" class="date">
						<td class="prop">
							<span class="en">file last modified date</span>
							<span class="ja">ファイル更新日時</span>
						</td>
					</tr>
				</table>
				<div class="footnote">
					<span class="en">
						* File format is determined from the contents of the file.
					</span>
					<span class="ja">
						※ ファイル形式はファイルの内容に基づいて判定しています
					</span>
				</div>
			</div>
		</div>
	</div>
	<div id="loading" class="dialog">
		<div>
			<h3 id="loadingStatus">
				<span class="en"></span>
				<span class="ja"></span>
			</h3>
			<table id="loadingList">
			</table>
		</div>
	</div>
	<div id="analysis" class="dialog">
		<div>
			<div class="header">
				<h3>
					<img src="res/histogram.svg" width="20">
					<span class="en">Analysis Tools</span>
					<span class="ja">分析ツール</span>
				</h3>
			</div>
			<div class="menu">
				<button onclick="toggleHistogram()">
					<img src="res/histogram.svg" width="20">
					<span class="en">Histogram</span>
					<span class="ja">ヒストグラム</span>
					<span class="flat keys"><span>h</span></span>
				</button>
				<button onclick="toggleWaveform()">
					<img src="res/waveform.svg" width="20">
					<span class="en">Waveform</span>
					<span class="ja">波形</span>
					<span class="flat keys"><span>w</span></span>
				</button>
				<button onclick="toggleMetrics()">
					<img src="res/psnr.svg" width="20">
					<span class="en">Image quality metrics (PSNR,MSE, etc)</span>
					<span class="ja">画質メトリクス (PSNR,MSE, etc)</span>
					<span class="flat keys"><span>m</span></span>
				</button>
			</div>
		</div>
	</div>
	<div id="histogram" class="dialog">
		<div>
			<div class="header">
				<h3>
					<img src="res/histogram.svg" width="20">
					<span class="en">Histogram</span>
					<span class="ja">ヒストグラム</span>
				</h3>
				<div id="histogramType" class="mode-sw">
					<button class="current">1. RGB</button>
					<button>2. <span class="en">Luminance</span><span class="ja">輝度</span></button>
				</div>
			</div>
			<table id="histoTable">
				<tr id="histoName"></tr>
				<tr id="histograms"></tr>
			</table>
		</div>
	</div>
	<div id="waveform" class="dialog">
		<div>
			<div class="header">
				<h3>
					<img src="res/waveform.svg" width="20">
					<span class="en">Waveform</span>
					<span class="ja">波形</span>
				</h3>
				<div id="waveformType" class="mode-sw">
					<button class="current">1. RGB</button>
					<button>2. <span class="en">Luminance</span><span class="ja">輝度</span></button>
				</div>
			</div>
			<table id="waveTable">
				<tr id="waveName"></tr>
				<tr id="waveforms"></tr>
			</table>
		</div>
	</div>
	<div id="metrics" class="dialog">
		<div>
			<div class="header">
				<h3>
					<img src="res/psnr.svg" width="20">
					<span class="en">Image quality metrics</span>
					<span class="ja">画質メトリクス</span>
				</h3>
			</div>
			<div>
				<table id="metricsTable">
					<tr id="metricsBaseName">
						<td class="prop">
							<span class="en">Base Image</span>
							<span class="ja">基準画像</span>
						</td>
					</tr>
					<tr id="metricsTargetName">
						<td class="prop">
							<span class="en">Target Image</span>
							<span class="ja">対象画像</span>
						</td>
					</tr>
					<tr id="psnrValue" class="num">
						<td class="prop">
							<span class="en">PSNR (*)</span>
							<span class="ja">PSNR (※)</span>
						</td>
					</tr>
					<tr id="mseValue" class="num">
						<td class="prop">
							<span class="en">MSE (*)</span>
							<span class="ja">MSE (※)</span>
						</td>
					</tr>
					<tr id="nccValue" class="num">
						<td class="prop">
							<span class="en">NCC (*)</span>
							<span class="ja">NCC (※)</span>
						</td>
					</tr>
					<tr id="aeValue" class="num">
						<td class="prop">
							<span class="en">Number of different pixels</span>
							<span class="ja">異なるピクセルの数</span>
						</td>
					</tr>
				</table>
				<div class="footnote">
					<span class="en">
						* PSNR = Peak signal-to-noise ratio<br>
						* MSE = Mean squared error<br>
						* NCC = Normalized cross-correlation
					</span>
					<span class="ja">
						※PSNR = ピーク信号対雑音比<br>
						※MSE = 平均二乗誤差<br>
						※NCC = 正規化相互相関
					</span>
				</div>
			</div>
		</div>
	</div>
</div>

</body>
</html>
